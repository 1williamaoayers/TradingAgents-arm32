# è´¢è”ç¤¾æ–°é—»è·å–æŒ‡å—

## ğŸ“° è´¢è”ç¤¾ç®€ä»‹

**è´¢è”ç¤¾**(Cailianpress)æ˜¯ä¸Šæµ·æŠ¥ä¸šé›†å›¢ä¸»ç®¡ä¸»åŠçš„è´¢ç»æ–°é—»é›†å›¢,æä¾›24å°æ—¶ä¸é—´æ–­çš„è´¢ç»å¿«è®¯å’Œæ·±åº¦æŠ¥é“,æ˜¯ä¸­å›½æœ€æƒå¨çš„è´¢ç»èµ„è®¯æ¥æºä¹‹ä¸€ã€‚

---

## ğŸ¯ è·å–æ–¹æ³•

### æ–¹æ³•1: RSSHub (æ¨è) â­â­â­

**ä¼˜ç‚¹**:
- âœ… å®Œå…¨å…è´¹
- âœ… æ— éœ€APIå¯†é’¥
- âœ… æ•°æ®å®æ—¶
- âœ… ç¨³å®šå¯é 

**ç¼ºç‚¹**:
- âš ï¸ ä¾èµ–RSSHubæœåŠ¡
- âš ï¸ å¯èƒ½éœ€è¦ä»£ç†

**ä½¿ç”¨æ–¹æ³•**:

#### 1. å®‰è£…ä¾èµ–
```bash
pip install feedparser requests
```

#### 2. ä½¿ç”¨Pythonè„šæœ¬
```python
from tools.cailianpress_news import CailianpressNewsProvider

provider = CailianpressNewsProvider()

# è·å–ç”µæŠ¥å¿«è®¯
news = provider.get_news(method='rsshub', category='telegraph', max_items=10)

for item in news:
    print(f"{item['title']}")
    print(f"  æ—¶é—´: {item['published']}")
    print(f"  é“¾æ¥: {item['link']}")
    print()
```

#### 3. å¯ç”¨çš„RSSHubè·¯ç”±

| è·¯ç”± | è¯´æ˜ | URL |
|------|------|-----|
| `telegraph` | ç”µæŠ¥å¿«è®¯(æ¨è) | `https://rsshub.app/cls/telegraph` |
| `depth` | æ·±åº¦æ–‡ç«  | `https://rsshub.app/cls/depth` |
| `ranking/hot` | çƒ­é—¨æ–‡ç« æ’è¡Œ | `https://rsshub.app/cls/ranking/hot` |
| `subject/1151` | æœ‰å£°æ—©æŠ¥ | `https://rsshub.app/cls/subject/1151` |

#### 4. RSSHubå®ä¾‹åˆ—è¡¨

å¦‚æœä¸»å®ä¾‹ä¸å¯ç”¨,å¯ä»¥å°è¯•å…¶ä»–å®ä¾‹:

- ä¸»å®ä¾‹: `https://rsshub.app`
- å¤‡ç”¨1: `https://rsshub.rssforever.com`
- å¤‡ç”¨2: `https://rsshub.anyfeeder.com`
- è‡ªå»ºå®ä¾‹: å‚è€ƒ [RSSHubæ–‡æ¡£](https://docs.rsshub.app/)

---

### æ–¹æ³•2: è´¢è”ç¤¾API (éå®˜æ–¹) â­â­

**ä¼˜ç‚¹**:
- âœ… å…è´¹
- âœ… æ•°æ®å®æ—¶
- âœ… è¿”å›JSONæ ¼å¼

**ç¼ºç‚¹**:
- âš ï¸ éå®˜æ–¹æ¥å£,å¯èƒ½ä¸ç¨³å®š
- âš ï¸ å¯èƒ½éœ€è¦ç­¾åéªŒè¯
- âš ï¸ å¯èƒ½éšæ—¶å¤±æ•ˆ

**APIæ¥å£**:

```
GET https://www.cls.cn/v1/roll/get_roll_list
```

**å‚æ•°**:
- `app`: CailianpressWeb
- `os`: web
- `sv`: 7.7.5
- `rn`: è¿”å›æ•°é‡

**ä½¿ç”¨ç¤ºä¾‹**:
```python
provider = CailianpressNewsProvider()
news = provider.get_news(method='api', max_items=10)
```

---

### æ–¹æ³•3: ç¬¬ä¸‰æ–¹APIæœåŠ¡ â­

**ä¼˜ç‚¹**:
- âœ… ç¨³å®šæ€§è¾ƒå¥½
- âœ… æœ‰æŠ€æœ¯æ”¯æŒ
- âœ… è¿”å›æ ¼å¼è§„èŒƒ

**ç¼ºç‚¹**:
- âŒ éœ€è¦ä»˜è´¹æˆ–æ³¨å†Œ
- âŒ æœ‰è°ƒç”¨æ¬¡æ•°é™åˆ¶

**ç¬¬ä¸‰æ–¹æœåŠ¡å•†**:

1. **è§…çŸ¥API** (https://www.98dou.cn)
   - æä¾›è´¢è”ç¤¾å®æ—¶ç”µæŠ¥API
   - éœ€è¦æ³¨å†Œè·å–APIå¯†é’¥
   - æœ‰å…è´¹é¢åº¦

2. **å°å°˜API** (https://www.xcvts.cn)
   - æä¾›è´¢è”ç¤¾æ–°é—»æ¥å£
   - éœ€è¦æ³¨å†Œè·å–APIå¯†é’¥

3. **é˜¿é‡Œäº‘å¸‚åœº**
   - æœç´¢"è´¢è”ç¤¾API"
   - å•†ä¸šçº§æœåŠ¡,ç¨³å®šæ€§é«˜
   - éœ€è¦ä»˜è´¹

**ä½¿ç”¨ç¤ºä¾‹**:
```python
provider = CailianpressNewsProvider()
news = provider.get_news(
    method='third_party',
    api_key='your_api_key_here',
    max_items=10
)
```

---

## ğŸ’» å¿«é€Ÿå¼€å§‹

### 1. æµ‹è¯•è„šæœ¬

```bash
# è¿è¡Œæµ‹è¯•
python3 tools/cailianpress_news.py
```

### 2. é›†æˆåˆ°é¡¹ç›®

```python
from tools.cailianpress_news import CailianpressNewsProvider

# åˆ›å»ºå®ä¾‹
provider = CailianpressNewsProvider()

# è·å–æ–°é—»(æ¨èä½¿ç”¨RSSHub)
news = provider.get_news(
    method='rsshub',
    category='telegraph',
    max_items=20
)

# å¤„ç†æ–°é—»
for item in news:
    print(f"æ ‡é¢˜: {item['title']}")
    print(f"å†…å®¹: {item['content']}")
    print(f"æ—¶é—´: {item['published']}")
    print(f"é“¾æ¥: {item['link']}")
    print()
```

---

## ğŸ“‹ æ•°æ®æ ¼å¼

æ‰€æœ‰æ–¹æ³•è¿”å›çš„æ–°é—»æ•°æ®æ ¼å¼ç»Ÿä¸€:

```python
{
    'title': 'æ–°é—»æ ‡é¢˜',
    'content': 'æ–°é—»å†…å®¹æ‘˜è¦',
    'link': 'æ–°é—»é“¾æ¥',
    'published': 'å‘å¸ƒæ—¶é—´',
    'source': 'è´¢è”ç¤¾',
    'category': 'æ–°é—»ç±»åˆ«'
}
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: RSSHubæ— æ³•è®¿é—®æ€ä¹ˆåŠ?

**A**: 
1. å°è¯•ä½¿ç”¨å¤‡ç”¨RSSHubå®ä¾‹
2. æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒDNSè®¾ç½®
3. è€ƒè™‘ä½¿ç”¨ä»£ç†
4. è‡ªå»ºRSSHubå®ä¾‹

### Q2: è´¢è”ç¤¾APIè¿”å›é”™è¯¯?

**A**: 
1. æ£€æŸ¥è¯·æ±‚å‚æ•°æ˜¯å¦æ­£ç¡®
2. å¯èƒ½éœ€è¦æ·»åŠ ç­¾åéªŒè¯
3. å°è¯•ä½¿ç”¨RSSHubæ–¹æ³•(æ›´ç¨³å®š)

### Q3: å¦‚ä½•è‡ªå»ºRSSHubå®ä¾‹?

**A**: 
```bash
# ä½¿ç”¨Docker
docker run -d --name rsshub -p 1200:1200 diygod/rsshub

# è®¿é—®
http://localhost:1200/cls/telegraph
```

### Q4: ç¬¬ä¸‰æ–¹APIå¦‚ä½•è·å–å¯†é’¥?

**A**: 
1. è®¿é—®ç¬¬ä¸‰æ–¹æœåŠ¡å•†ç½‘ç«™
2. æ³¨å†Œè´¦å·
3. åœ¨æ§åˆ¶å°è·å–APIå¯†é’¥
4. æŸ¥çœ‹APIæ–‡æ¡£å’Œä½¿ç”¨é™åˆ¶

### Q5: å¦‚ä½•è¿‡æ»¤ç‰¹å®šè‚¡ç¥¨çš„æ–°é—»?

**A**: 
```python
news = provider.get_news(method='rsshub', max_items=50)

# è¿‡æ»¤åŒ…å«ç‰¹å®šå…³é”®è¯çš„æ–°é—»
stock_code = "600000"
filtered_news = [
    item for item in news 
    if stock_code in item['title'] or stock_code in item['content']
]
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜æ–°é—»æ•°æ®

```python
import json
from datetime import datetime, timedelta

class CachedCailianpressProvider(CailianpressNewsProvider):
    def __init__(self, cache_file='cls_cache.json', cache_minutes=5):
        super().__init__()
        self.cache_file = cache_file
        self.cache_minutes = cache_minutes
    
    def get_news(self, **kwargs):
        # æ£€æŸ¥ç¼“å­˜
        try:
            with open(self.cache_file, 'r', encoding='utf-8') as f:
                cache = json.load(f)
                cache_time = datetime.fromisoformat(cache['time'])
                
                if datetime.now() - cache_time < timedelta(minutes=self.cache_minutes):
                    print("âœ“ ä½¿ç”¨ç¼“å­˜æ•°æ®")
                    return cache['data']
        except:
            pass
        
        # è·å–æ–°æ•°æ®
        news = super().get_news(**kwargs)
        
        # ä¿å­˜ç¼“å­˜
        if news:
            with open(self.cache_file, 'w', encoding='utf-8') as f:
                json.dump({
                    'time': datetime.now().isoformat(),
                    'data': news
                }, f, ensure_ascii=False, indent=2)
        
        return news
```

### 2. å¹¶å‘è·å–

```python
import concurrent.futures

def get_news_from_multiple_sources():
    provider = CailianpressNewsProvider()
    
    with concurrent.futures.ThreadPoolExecutor(max_workers=3) as executor:
        futures = {
            executor.submit(provider.get_news, method='rsshub'): 'rsshub',
            executor.submit(provider.get_news, method='api'): 'api',
        }
        
        for future in concurrent.futures.as_completed(futures):
            source = futures[future]
            try:
                news = future.result()
                if news:
                    print(f"âœ“ {source} è·å–æˆåŠŸ: {len(news)}æ¡")
                    return news  # è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ
            except Exception as e:
                print(f"âœ— {source} å¤±è´¥: {e}")
    
    return []
```

---

## ğŸ“Š ä½¿ç”¨å»ºè®®

### æ¨èé…ç½®

| åœºæ™¯ | æ¨èæ–¹æ³• | ç†ç”± |
|------|---------|------|
| ä¸ªäººå­¦ä¹  | RSSHub | å…è´¹ã€ç¨³å®š |
| å°å‹é¡¹ç›® | RSSHub | æ— éœ€æ³¨å†Œ |
| å•†ä¸šé¡¹ç›® | ç¬¬ä¸‰æ–¹API | ç¨³å®šæ€§ä¿è¯ |
| é«˜é¢‘è°ƒç”¨ | è‡ªå»ºRSSHub | æ— é™åˆ¶ |

### æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä½¿ç”¨RSSHub** - å…è´¹ä¸”ç¨³å®š
2. **æ·»åŠ ç¼“å­˜æœºåˆ¶** - å‡å°‘APIè°ƒç”¨
3. **å®ç°é™çº§ç­–ç•¥** - å¤šç§æ–¹æ³•å¤‡ç”¨
4. **åˆç†è®¾ç½®é¢‘ç‡** - é¿å…è¿‡åº¦è¯·æ±‚
5. **é”™è¯¯å¤„ç†** - æ•è·å¼‚å¸¸å¹¶è®°å½•

---

## ğŸ“ æ›´æ–°æ—¥å¿—

- **2025-12-09**: åˆ›å»ºè´¢è”ç¤¾æ–°é—»è·å–å·¥å…·
- **2025-12-09**: æ”¯æŒRSSHubã€APIå’Œç¬¬ä¸‰æ–¹ä¸‰ç§æ–¹æ³•

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [è´¢è”ç¤¾å®˜ç½‘](https://www.cls.cn)
- [RSSHubæ–‡æ¡£](https://docs.rsshub.app/routes/finance#cai-lian-she)
- [RSSHub GitHub](https://github.com/DIYgod/RSSHub)
- [è§…çŸ¥API](https://www.98dou.cn)

---

**ç»´æŠ¤è€…**: TradingAgentså›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-12-09
